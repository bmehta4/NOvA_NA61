\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter}{\section{Neutrino\-Flux\-Reweight\-:\-:Thin\-Targetp\-C\-Pion\-Reweighter Class Reference}
\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter}\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
}


Reweighter of thin target pion production.  




{\ttfamily \#include $<$Thin\-Targetp\-C\-Pion\-Reweighter.\-h$>$}

Inheritance diagram for Neutrino\-Flux\-Reweight\-:\-:Thin\-Targetp\-C\-Pion\-Reweighter\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a461135f73ed6cea79b71cc37d17466e2}{Thin\-Targetp\-C\-Pion\-Reweighter} (int iuniv, const \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table}{Parameter\-Table} \&cv\-\_\-pars, const \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table}{Parameter\-Table} \&univ\-\_\-pars)
\item 
virtual \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a0d76e9167d90e1c56a7291ae6d219fd2}{$\sim$\-Thin\-Targetp\-C\-Pion\-Reweighter} ()
\item 
virtual bool \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a09067dcacb294ca133e2660d61302e85}{can\-Reweight} (const \hyperlink{class_neutrino_flux_reweight_1_1_interaction_data}{Interaction\-Data} \&aa)
\begin{DoxyCompactList}\small\item\em can the particular instance of this class reweight this interaction? \end{DoxyCompactList}\item 
virtual double \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ab797bbeeedb04cda73feef891434cd5f}{calculate\-Weight} (const \hyperlink{class_neutrino_flux_reweight_1_1_interaction_data}{Interaction\-Data} \&inter\-\_\-data)
\begin{DoxyCompactList}\small\item\em calculate a weight for this interaction given the central value parameters and the parameters for this universe. The weight is something like\-: f(cv)/f(M\-C) $\ast$ f(univ)/f(cv) where cv in this case corresponds to the best value of the parameter, given the data. If univ\-\_\-pars=cv\-\_\-pars then we are calculating a central value weight \end{DoxyCompactList}\item 
double \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ac34d175572ca9ac093e973e877891eae}{calculate\-Data\-Scale} (int inc\-\_\-pdg, double inc\-\_\-mom, int prod\-\_\-pdg, double xf, double pt)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ae2c5b20aa1823516579b0684d188d75d}{data\-\_\-prod\-\_\-xs}
\item 
std\-::vector$<$ float $>$ \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a3602ae8237c0cc7729045b13b90874b4}{vbin\-\_\-data\-\_\-pip}
\item 
std\-::vector$<$ float $>$ \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_aea0dca1b93e560e26871da0bdf1ac075}{vbin\-\_\-data\-\_\-pim}
\item 
std\-::vector$<$ float $>$ \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a844e9c7ba521a42ce5ebe5fbb5b2d5f4}{bart\-\_\-vbin\-\_\-data\-\_\-pip}
\item 
std\-::vector$<$ float $>$ \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a9d7ffcf3ca0c5a7b0f1c37435cc86403}{bart\-\_\-vbin\-\_\-data\-\_\-pim}
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a59ed15e151960ba8dc990d8c6bbd7567}{i\-Univ}
\item 
const \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table}{Parameter\-Table} \& \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ad0ab176cd637c51c8ca5d4f87ed93ded}{cv\-Pars}
\item 
const \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table}{Parameter\-Table} \& \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_afc6d553d64c70f7b98636b2bb8a13b43}{univ\-Pars}
\item 
float \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a87d4a2cfb3ce6e4e5c7f0f3be1144915}{aux\-\_\-par}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Reweighter of thin target pion production. 

Definition at line 18 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a461135f73ed6cea79b71cc37d17466e2}{\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}!Thin\-Targetp\-C\-Pion\-Reweighter@{Thin\-Targetp\-C\-Pion\-Reweighter}}
\index{Thin\-Targetp\-C\-Pion\-Reweighter@{Thin\-Targetp\-C\-Pion\-Reweighter}!NeutrinoFluxReweight::ThinTargetpCPionReweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\subsubsection[{Thin\-Targetp\-C\-Pion\-Reweighter}]{\setlength{\rightskip}{0pt plus 5cm}Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter\-::\-Thin\-Targetp\-C\-Pion\-Reweighter (
\begin{DoxyParamCaption}
\item[{int}]{iuniv, }
\item[{const {\bf Parameter\-Table} \&}]{cv\-\_\-pars, }
\item[{const {\bf Parameter\-Table} \&}]{univ\-\_\-pars}
\end{DoxyParamCaption}
)}}\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a461135f73ed6cea79b71cc37d17466e2}


Definition at line 11 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-cpp.


\begin{DoxyCode}
11                                                                                                            
                            :\hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a59ed15e151960ba8dc990d8c6bbd7567}{iUniv}(iuniv),\hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ad0ab176cd637c51c8ca5d4f87ed93ded}{cvPars}(cv\_pars),\hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_afc6d553d64c70f7b98636b2bb8a13b43}{univPars}(univ\_pars)\{
12     
13     ThinTargetBins*  Thinbins =  \hyperlink{class_neutrino_flux_reweight_1_1_thin_target_bins_aeff5cf7220dd08322f5abac2cbc7ff33}{ThinTargetBins::getInstance}();
14     \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a3602ae8237c0cc7729045b13b90874b4}{vbin\_data\_pip}.reserve(Thinbins->GetNbins\_pC\_piX\_NA49());
15     \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_aea0dca1b93e560e26871da0bdf1ac075}{vbin\_data\_pim}.reserve(Thinbins->GetNbins\_pC\_piX\_NA49());
16     \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a844e9c7ba521a42ce5ebe5fbb5b2d5f4}{bart\_vbin\_data\_pip}.reserve(Thinbins->GetNbins\_pC\_piX\_Barton());
17     \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a9d7ffcf3ca0c5a7b0f1c37435cc86403}{bart\_vbin\_data\_pim}.reserve(Thinbins->GetNbins\_pC\_piX\_Barton());
18     
19     \textcolor{comment}{// const boost::interprocess::flat\_map<std::string, double>& cv\_table   = cvPars.getMap();}
20     \textcolor{comment}{// const boost::interprocess::flat\_map<std::string, double>& univ\_table = univPars.getMap();}
21     
22     \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ae2c5b20aa1823516579b0684d188d75d}{data\_prod\_xs} = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_afc6d553d64c70f7b98636b2bb8a13b43}{univPars}.\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_acb7dc8335b65b116f6092f2fa57ca5ed}{getParameterValue}(\textcolor{stringliteral}{"prod\_prtC\_xsec"});
23     
24     \textcolor{comment}{//the number of bins needs to be written from the xmls files }
25     \textcolor{keywordtype}{char} namepar[100];
26     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} ii=0;ii<Thinbins->GetNbins\_pC\_piX\_NA49();ii++)\{
27       
28       sprintf(namepar,\textcolor{stringliteral}{"ThinTarget\_pC\_%s\_sys\_%d"},\textcolor{stringliteral}{"pip"},ii);
29       \textcolor{keywordtype}{double} data\_cv  = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ad0ab176cd637c51c8ca5d4f87ed93ded}{cvPars}.\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_acb7dc8335b65b116f6092f2fa57ca5ed}{getParameterValue}(std::string(namepar));
30       \textcolor{keywordtype}{double} data\_sys = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_afc6d553d64c70f7b98636b2bb8a13b43}{univPars}.\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_acb7dc8335b65b116f6092f2fa57ca5ed}{getParameterValue}(std::string(namepar));
31       sprintf(namepar,\textcolor{stringliteral}{"ThinTarget\_pC\_%s\_stats\_%d"},\textcolor{stringliteral}{"pip"},ii);
32       \textcolor{keywordtype}{double} data\_sta = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_afc6d553d64c70f7b98636b2bb8a13b43}{univPars}.\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_acb7dc8335b65b116f6092f2fa57ca5ed}{getParameterValue}(std::string(namepar));       
33       \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a3602ae8237c0cc7729045b13b90874b4}{vbin\_data\_pip}.push\_back(data\_sta + data\_sys - data\_cv);
34       
35       sprintf(namepar,\textcolor{stringliteral}{"ThinTarget\_pC\_%s\_sys\_%d"},\textcolor{stringliteral}{"pim"},ii);
36       data\_cv  = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ad0ab176cd637c51c8ca5d4f87ed93ded}{cvPars}.\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_acb7dc8335b65b116f6092f2fa57ca5ed}{getParameterValue}(std::string(namepar));
37       data\_sys = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_afc6d553d64c70f7b98636b2bb8a13b43}{univPars}.\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_acb7dc8335b65b116f6092f2fa57ca5ed}{getParameterValue}(std::string(namepar));
38       sprintf(namepar,\textcolor{stringliteral}{"ThinTarget\_pC\_%s\_stats\_%d"},\textcolor{stringliteral}{"pim"},ii);
39       data\_sta = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_afc6d553d64c70f7b98636b2bb8a13b43}{univPars}.\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_acb7dc8335b65b116f6092f2fa57ca5ed}{getParameterValue}(std::string(namepar));
40       \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_aea0dca1b93e560e26871da0bdf1ac075}{vbin\_data\_pim}.push\_back(data\_sta + data\_sys - data\_cv);
41       
42     \}    
43     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} ii=0;ii<Thinbins->GetNbins\_pC\_piX\_Barton();ii++)\{
44       
45       sprintf(namepar,\textcolor{stringliteral}{"ThinTargetBarton\_pC\_%s\_%d"},\textcolor{stringliteral}{"pip"},ii);
46       \textcolor{keywordtype}{double} data\_err = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_afc6d553d64c70f7b98636b2bb8a13b43}{univPars}.\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_acb7dc8335b65b116f6092f2fa57ca5ed}{getParameterValue}(std::string(namepar));
47       \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a844e9c7ba521a42ce5ebe5fbb5b2d5f4}{bart\_vbin\_data\_pip}.push\_back(data\_err);
48       
49       sprintf(namepar,\textcolor{stringliteral}{"ThinTargetBarton\_pC\_%s\_%d"},\textcolor{stringliteral}{"pim"},ii);
50       data\_err = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_afc6d553d64c70f7b98636b2bb8a13b43}{univPars}.\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_acb7dc8335b65b116f6092f2fa57ca5ed}{getParameterValue}(std::string(namepar));      
51       \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a9d7ffcf3ca0c5a7b0f1c37435cc86403}{bart\_vbin\_data\_pim}.push\_back(data\_err);
52       
53     \} 
54     
55     \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a87d4a2cfb3ce6e4e5c7f0f3be1144915}{aux\_par} = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_afc6d553d64c70f7b98636b2bb8a13b43}{univPars}.\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_acb7dc8335b65b116f6092f2fa57ca5ed}{getParameterValue}(\textcolor{stringliteral}{"aux\_parameter"});
56     \textcolor{keywordflow}{if}(\hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a87d4a2cfb3ce6e4e5c7f0f3be1144915}{aux\_par}<1.e-15)\hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a87d4a2cfb3ce6e4e5c7f0f3be1144915}{aux\_par} = 1.0;
57 
58   \}
\end{DoxyCode}
\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a0d76e9167d90e1c56a7291ae6d219fd2}{\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}!$\sim$\-Thin\-Targetp\-C\-Pion\-Reweighter@{$\sim$\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\index{$\sim$\-Thin\-Targetp\-C\-Pion\-Reweighter@{$\sim$\-Thin\-Targetp\-C\-Pion\-Reweighter}!NeutrinoFluxReweight::ThinTargetpCPionReweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\subsubsection[{$\sim$\-Thin\-Targetp\-C\-Pion\-Reweighter}]{\setlength{\rightskip}{0pt plus 5cm}Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter\-::$\sim$\-Thin\-Targetp\-C\-Pion\-Reweighter (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a0d76e9167d90e1c56a7291ae6d219fd2}


Definition at line 60 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-cpp.


\begin{DoxyCode}
60                                                           \{
61     
62   \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ac34d175572ca9ac093e973e877891eae}{\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}!calculate\-Data\-Scale@{calculate\-Data\-Scale}}
\index{calculate\-Data\-Scale@{calculate\-Data\-Scale}!NeutrinoFluxReweight::ThinTargetpCPionReweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\subsubsection[{calculate\-Data\-Scale}]{\setlength{\rightskip}{0pt plus 5cm}double Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter\-::calculate\-Data\-Scale (
\begin{DoxyParamCaption}
\item[{int}]{inc\-\_\-pdg, }
\item[{double}]{inc\-\_\-mom, }
\item[{int}]{prod\-\_\-pdg, }
\item[{double}]{xf, }
\item[{double}]{pt}
\end{DoxyParamCaption}
)}}\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ac34d175572ca9ac093e973e877891eae}


Definition at line 133 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-cpp.


\begin{DoxyCode}
133                                                                                                            
                \{
134     \textcolor{keywordtype}{double} scaling\_violation = 1.0;
135     ThinTargetMC*  dtH =  \hyperlink{class_neutrino_flux_reweight_1_1_thin_target_m_c_a2a114747fed2677cd3b7213555c002b9}{ThinTargetMC::getInstance}();
136     \textcolor{comment}{//temporary:}
137     \textcolor{keyword}{const} \textcolor{keywordtype}{int} Nscl = 11;
138     \textcolor{keyword}{const} \textcolor{keywordtype}{int} moms[Nscl] = \{12,20,31,40,50,60,70,80,100,120,158\};
139     
140     \textcolor{keywordtype}{int} idx\_part = -1;
141     \textcolor{keywordflow}{if}(prod\_pdg == 211)idx\_part = 0;
142     \textcolor{keywordflow}{if}(prod\_pdg ==-211)idx\_part = 1;
143     \textcolor{keywordflow}{if}(idx\_part<0)\{
144       std::cout<<\textcolor{stringliteral}{"Error in the prod particle"}<<std::endl;
145       \textcolor{keywordflow}{return} 1.0;
146     \}
147     
148     \textcolor{keywordtype}{int} binid = dtH->hTTScl[idx\_part][Nscl-1]->FindBin(xf,pt);
149     \textcolor{keywordtype}{double} scl\_ref158 = dtH->hTTScl[idx\_part][Nscl-1]->GetBinContent(binid);    
150     
151     \textcolor{keywordtype}{int} idx\_lowp = -1;
152     \textcolor{keywordtype}{int} idx\_hip  = -1;
153     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0;i<Nscl-1;i++)\{
154       \textcolor{keywordflow}{if}(inc\_mom>=\textcolor{keywordtype}{double}(moms[i]) && inc\_mom<\textcolor{keywordtype}{double}(moms[i+1]))\{
155         idx\_lowp=i;
156         idx\_hip =i+1;
157       \}
158     \}
159     \textcolor{keywordflow}{if}(idx\_lowp<0 || idx\_hip<0)\{
160       std::cout<<\textcolor{stringliteral}{"Error calculating the scaling"}<<std::endl;
161       \textcolor{keywordflow}{return} 1.0;
162     \}
163     \textcolor{keywordtype}{double} scl\_low = dtH->hTTScl[idx\_part][idx\_lowp]->GetBinContent(binid);
164     \textcolor{keywordtype}{double} scl\_hi  = dtH->hTTScl[idx\_part][idx\_hip]->GetBinContent(binid);
165     \textcolor{keywordtype}{double} scl\_m   =  scl\_low + (inc\_mom-double(moms[idx\_lowp]))*(scl\_hi-scl\_low)/(double(moms[idx\_hip])-
      double(moms[idx\_lowp]));
166     \textcolor{keywordflow}{if}(scl\_ref158<1.e-10)\{
167       \textcolor{comment}{// std::cout<<"ref158 zero!!! "<<scl\_ref158<<std::endl;}
168       \textcolor{keywordflow}{return} 1.0;
169     \}
170     scaling\_violation = scl\_m/scl\_ref158;
171     \textcolor{keywordflow}{return} scaling\_violation;
172   \}
\end{DoxyCode}
\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ab797bbeeedb04cda73feef891434cd5f}{\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}!calculate\-Weight@{calculate\-Weight}}
\index{calculate\-Weight@{calculate\-Weight}!NeutrinoFluxReweight::ThinTargetpCPionReweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\subsubsection[{calculate\-Weight}]{\setlength{\rightskip}{0pt plus 5cm}double Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter\-::calculate\-Weight (
\begin{DoxyParamCaption}
\item[{const {\bf Interaction\-Data} \&}]{inter\-\_\-data}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ab797bbeeedb04cda73feef891434cd5f}


calculate a weight for this interaction given the central value parameters and the parameters for this universe. The weight is something like\-: f(cv)/f(M\-C) $\ast$ f(univ)/f(cv) where cv in this case corresponds to the best value of the parameter, given the data. If univ\-\_\-pars=cv\-\_\-pars then we are calculating a central value weight 



Implements \hyperlink{class_neutrino_flux_reweight_1_1_i_interaction_reweighting_a49b0d73e778411d629205d23575703c3}{Neutrino\-Flux\-Reweight\-::\-I\-Interaction\-Reweighting}.



Definition at line 86 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-cpp.


\begin{DoxyCode}
86                                                                              \{
87     
88     \textcolor{keywordtype}{double} wgt = 1.0;
89     \textcolor{keywordtype}{double} low\_value = 1.e-18; 
90     ThinTargetBins*  Thinbins =  \hyperlink{class_neutrino_flux_reweight_1_1_thin_target_bins_aeff5cf7220dd08322f5abac2cbc7ff33}{ThinTargetBins::getInstance}();
91     \textcolor{keywordtype}{int} bin = Thinbins->BinID\_pC\_pi(aa.xF,aa.Pt,aa.Prod\_pdg);
92     \textcolor{keywordtype}{int} bart\_bin = Thinbins->barton\_BinID\_pC\_pi(aa.xF,aa.Pt,aa.Prod\_pdg);
93     \textcolor{keywordflow}{if}(bin<0 && bart\_bin<0)\textcolor{keywordflow}{return} \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a87d4a2cfb3ce6e4e5c7f0f3be1144915}{aux\_par};
94     
95     \textcolor{comment}{//Calculating the scale:}
96     \textcolor{keywordtype}{double} data\_scale = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ac34d175572ca9ac093e973e877891eae}{calculateDataScale}(aa.Inc\_pdg,aa.Inc\_P,aa.Prod\_pdg,aa.xF,aa.Pt);
97     \textcolor{keywordtype}{double} dataval = -1;
98     \textcolor{keywordflow}{if}(aa.Prod\_pdg == 211 && bin>=0)           dataval = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a3602ae8237c0cc7729045b13b90874b4}{vbin\_data\_pip}[bin];
99     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(aa.Prod\_pdg == 211 && bart\_bin>=0) dataval = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a844e9c7ba521a42ce5ebe5fbb5b2d5f4}{bart\_vbin\_data\_pip}[bart\_bin];
100     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(aa.Prod\_pdg == -211 && bin>=0)     dataval = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_aea0dca1b93e560e26871da0bdf1ac075}{vbin\_data\_pim}[bin];
101     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(aa.Prod\_pdg == -211 && bart\_bin>=0)dataval = \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a9d7ffcf3ca0c5a7b0f1c37435cc86403}{bart\_vbin\_data\_pim}[bart\_bin];
102     \textcolor{keywordflow}{else}\{
103       \textcolor{comment}{//  std::cout<<"Something is wrong, pdg\_prod: "<< aa.Prod\_pdg  <<std::endl;}
104       \textcolor{keywordflow}{return} \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a87d4a2cfb3ce6e4e5c7f0f3be1144915}{aux\_par};
105     \}
106 
107     \textcolor{comment}{//checking if this is the first interaction:}
108     \textcolor{keywordflow}{if}(aa.gen==0)dataval /= \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ae2c5b20aa1823516579b0684d188d75d}{data\_prod\_xs};
109     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(aa.gen>0)dataval /= 1.0;
110     \textcolor{keywordflow}{else}\{
111       std::cout<<\textcolor{stringliteral}{"Something is wrong with gen "}<<std::endl;
112       \textcolor{keywordflow}{return} \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a87d4a2cfb3ce6e4e5c7f0f3be1144915}{aux\_par};
113     \}
114 
115     dataval *= data\_scale;
116 
117     ThinTargetMC*  mc =  \hyperlink{class_neutrino_flux_reweight_1_1_thin_target_m_c_a2a114747fed2677cd3b7213555c002b9}{ThinTargetMC::getInstance}();    
118     \textcolor{keywordtype}{double} mc\_cv = mc->getMCval\_pC\_X(aa.Inc\_P,aa.xF,aa.Pt,aa.Prod\_pdg); 
119     \textcolor{keywordtype}{double} mc\_prod = mc->getMCxs\_pC\_piK(aa.gen,aa.Inc\_P);
120     mc\_cv /= mc\_prod;
121    \textcolor{comment}{// std::cout<<aa.Prod\_pdg<<" "<<aa.Pt<<" "<<mc\_cv<<" "<<dataval/mc\_cv<<std::endl;}
122     \textcolor{keywordflow}{if}(mc\_cv<1.e-12)\textcolor{keywordflow}{return} wgt;
123     wgt = dataval/mc\_cv;
124     \textcolor{keywordflow}{if}(wgt<low\_value)\{
125     
126       \textcolor{comment}{//std::cout<<"TTPCPI check wgt(<0) "<<iUniv<<" "<<aa.Inc\_P<<" "<<aa.xF<<" "<<aa.Pt<<"
       "<<aa.Prod\_pdg<<std::endl;}
127       \textcolor{keywordflow}{return} \hyperlink{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a87d4a2cfb3ce6e4e5c7f0f3be1144915}{aux\_par};
128     \}
129 
130     \textcolor{keywordflow}{return} wgt;
131   \}
\end{DoxyCode}
\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a09067dcacb294ca133e2660d61302e85}{\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}!can\-Reweight@{can\-Reweight}}
\index{can\-Reweight@{can\-Reweight}!NeutrinoFluxReweight::ThinTargetpCPionReweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\subsubsection[{can\-Reweight}]{\setlength{\rightskip}{0pt plus 5cm}bool Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter\-::can\-Reweight (
\begin{DoxyParamCaption}
\item[{const {\bf Interaction\-Data} \&}]{aa}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a09067dcacb294ca133e2660d61302e85}


can the particular instance of this class reweight this interaction? 



Implements \hyperlink{class_neutrino_flux_reweight_1_1_i_interaction_reweighting_aa3d1d3f37a93b02e447cf5eca333ac8d}{Neutrino\-Flux\-Reweight\-::\-I\-Interaction\-Reweighting}.



Definition at line 63 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-cpp.


\begin{DoxyCode}
63                                                                        \{
64     std::string mode(getenv(\textcolor{stringliteral}{"MODE"}));
65     \textcolor{comment}{//checking:}
66     \textcolor{comment}{//std::cout<<"ThingTargetpcPionReweighter:: "<<aa.Inc\_pdg<<" "<<aa.Vol<<" "<<aa.Prod\_pdg<<"
       "<<std::endl;}
67     \textcolor{keywordflow}{if}(aa.Inc\_pdg != 2212)\textcolor{keywordflow}{return} \textcolor{keyword}{false};
68     \textcolor{keywordflow}{if}(aa.Inc\_P < 12.0)\textcolor{keywordflow}{return} \textcolor{keyword}{false};
69     \textcolor{comment}{//volume check: }
70     \textcolor{keywordtype}{bool} is\_wrong\_volume = aa.Vol != \textcolor{stringliteral}{"TGT1"} && aa.Vol != \textcolor{stringliteral}{"BudalMonitor"} && aa.Vol != \textcolor{stringliteral}{"Budal\_HFVS"} && aa.Vol
       != \textcolor{stringliteral}{"Budal\_VFHS"};
71     \textcolor{keywordflow}{if}( (mode==\textcolor{stringliteral}{"REF"}) || (mode==\textcolor{stringliteral}{"OPT"}) )\{
72       is\_wrong\_volume = aa.Vol != \textcolor{stringliteral}{"TargetFinHorizontal"} && aa.Vol != \textcolor{stringliteral}{"TargetNoSplitSegment"} && aa.Vol!=\textcolor{stringliteral}{"
      tCoreLog"};
73     \}
74     \textcolor{keywordflow}{if}(is\_wrong\_volume)\textcolor{keywordflow}{return} \textcolor{keyword}{false};
75     \textcolor{comment}{//}
76     \textcolor{keywordflow}{if}(aa.Prod\_pdg != 211 && aa.Prod\_pdg != -211)\textcolor{keywordflow}{return} \textcolor{keyword}{false};
77     
78     ThinTargetBins*  Thinbins =  \hyperlink{class_neutrino_flux_reweight_1_1_thin_target_bins_aeff5cf7220dd08322f5abac2cbc7ff33}{ThinTargetBins::getInstance}();
79     \textcolor{keywordtype}{int} bin      = Thinbins->BinID\_pC\_pi(aa.xF,aa.Pt,aa.Prod\_pdg);
80     \textcolor{keywordtype}{int} bart\_bin = Thinbins->barton\_BinID\_pC\_pi(aa.xF,aa.Pt,aa.Prod\_pdg);
81     
82     \textcolor{keywordflow}{if}(bin<0 && bart\_bin<0)\textcolor{keywordflow}{return} \textcolor{keyword}{false};
83     \textcolor{keywordflow}{else} \textcolor{keywordflow}{return} \textcolor{keyword}{true};
84   \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a87d4a2cfb3ce6e4e5c7f0f3be1144915}{\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}!aux\-\_\-par@{aux\-\_\-par}}
\index{aux\-\_\-par@{aux\-\_\-par}!NeutrinoFluxReweight::ThinTargetpCPionReweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\subsubsection[{aux\-\_\-par}]{\setlength{\rightskip}{0pt plus 5cm}float Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter\-::aux\-\_\-par\hspace{0.3cm}{\ttfamily [private]}}}\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a87d4a2cfb3ce6e4e5c7f0f3be1144915}


Definition at line 34 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-h.

\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a9d7ffcf3ca0c5a7b0f1c37435cc86403}{\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}!bart\-\_\-vbin\-\_\-data\-\_\-pim@{bart\-\_\-vbin\-\_\-data\-\_\-pim}}
\index{bart\-\_\-vbin\-\_\-data\-\_\-pim@{bart\-\_\-vbin\-\_\-data\-\_\-pim}!NeutrinoFluxReweight::ThinTargetpCPionReweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\subsubsection[{bart\-\_\-vbin\-\_\-data\-\_\-pim}]{\setlength{\rightskip}{0pt plus 5cm}std\-::vector$<$float$>$ Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter\-::bart\-\_\-vbin\-\_\-data\-\_\-pim}}\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a9d7ffcf3ca0c5a7b0f1c37435cc86403}


Definition at line 28 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-h.

\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a844e9c7ba521a42ce5ebe5fbb5b2d5f4}{\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}!bart\-\_\-vbin\-\_\-data\-\_\-pip@{bart\-\_\-vbin\-\_\-data\-\_\-pip}}
\index{bart\-\_\-vbin\-\_\-data\-\_\-pip@{bart\-\_\-vbin\-\_\-data\-\_\-pip}!NeutrinoFluxReweight::ThinTargetpCPionReweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\subsubsection[{bart\-\_\-vbin\-\_\-data\-\_\-pip}]{\setlength{\rightskip}{0pt plus 5cm}std\-::vector$<$float$>$ Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter\-::bart\-\_\-vbin\-\_\-data\-\_\-pip}}\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a844e9c7ba521a42ce5ebe5fbb5b2d5f4}


Definition at line 28 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-h.

\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ad0ab176cd637c51c8ca5d4f87ed93ded}{\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}!cv\-Pars@{cv\-Pars}}
\index{cv\-Pars@{cv\-Pars}!NeutrinoFluxReweight::ThinTargetpCPionReweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\subsubsection[{cv\-Pars}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Parameter\-Table}\& Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter\-::cv\-Pars\hspace{0.3cm}{\ttfamily [private]}}}\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ad0ab176cd637c51c8ca5d4f87ed93ded}


Definition at line 32 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-h.

\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ae2c5b20aa1823516579b0684d188d75d}{\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}!data\-\_\-prod\-\_\-xs@{data\-\_\-prod\-\_\-xs}}
\index{data\-\_\-prod\-\_\-xs@{data\-\_\-prod\-\_\-xs}!NeutrinoFluxReweight::ThinTargetpCPionReweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\subsubsection[{data\-\_\-prod\-\_\-xs}]{\setlength{\rightskip}{0pt plus 5cm}double Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter\-::data\-\_\-prod\-\_\-xs}}\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_ae2c5b20aa1823516579b0684d188d75d}


Definition at line 26 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-h.

\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a59ed15e151960ba8dc990d8c6bbd7567}{\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}!i\-Univ@{i\-Univ}}
\index{i\-Univ@{i\-Univ}!NeutrinoFluxReweight::ThinTargetpCPionReweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\subsubsection[{i\-Univ}]{\setlength{\rightskip}{0pt plus 5cm}int Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter\-::i\-Univ\hspace{0.3cm}{\ttfamily [private]}}}\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a59ed15e151960ba8dc990d8c6bbd7567}


Definition at line 31 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-h.

\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_afc6d553d64c70f7b98636b2bb8a13b43}{\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}!univ\-Pars@{univ\-Pars}}
\index{univ\-Pars@{univ\-Pars}!NeutrinoFluxReweight::ThinTargetpCPionReweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\subsubsection[{univ\-Pars}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Parameter\-Table}\& Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter\-::univ\-Pars\hspace{0.3cm}{\ttfamily [private]}}}\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_afc6d553d64c70f7b98636b2bb8a13b43}


Definition at line 33 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-h.

\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_aea0dca1b93e560e26871da0bdf1ac075}{\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}!vbin\-\_\-data\-\_\-pim@{vbin\-\_\-data\-\_\-pim}}
\index{vbin\-\_\-data\-\_\-pim@{vbin\-\_\-data\-\_\-pim}!NeutrinoFluxReweight::ThinTargetpCPionReweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\subsubsection[{vbin\-\_\-data\-\_\-pim}]{\setlength{\rightskip}{0pt plus 5cm}std\-::vector$<$float$>$ Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter\-::vbin\-\_\-data\-\_\-pim}}\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_aea0dca1b93e560e26871da0bdf1ac075}


Definition at line 27 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-h.

\hypertarget{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a3602ae8237c0cc7729045b13b90874b4}{\index{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}!vbin\-\_\-data\-\_\-pip@{vbin\-\_\-data\-\_\-pip}}
\index{vbin\-\_\-data\-\_\-pip@{vbin\-\_\-data\-\_\-pip}!NeutrinoFluxReweight::ThinTargetpCPionReweighter@{Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter}}
\subsubsection[{vbin\-\_\-data\-\_\-pip}]{\setlength{\rightskip}{0pt plus 5cm}std\-::vector$<$float$>$ Neutrino\-Flux\-Reweight\-::\-Thin\-Targetp\-C\-Pion\-Reweighter\-::vbin\-\_\-data\-\_\-pip}}\label{class_neutrino_flux_reweight_1_1_thin_targetp_c_pion_reweighter_a3602ae8237c0cc7729045b13b90874b4}


Definition at line 27 of file Thin\-Targetp\-C\-Pion\-Reweighter.\-h.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
include/\hyperlink{_thin_targetp_c_pion_reweighter_8h}{Thin\-Targetp\-C\-Pion\-Reweighter.\-h}\item 
src/\hyperlink{_thin_targetp_c_pion_reweighter_8cpp}{Thin\-Targetp\-C\-Pion\-Reweighter.\-cpp}\end{DoxyCompactItemize}
