\hypertarget{class_neutrino_flux_reweight_1_1_parameter_table}{\section{Neutrino\-Flux\-Reweight\-:\-:Parameter\-Table Class Reference}
\label{class_neutrino_flux_reweight_1_1_parameter_table}\index{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}}
}


A list/table of parameter names and values.  




{\ttfamily \#include $<$Parameter\-Table.\-h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_ae86246f4fd43bf1c7b6f4b62ed6264e8}{Parameter\-Table} ()
\item 
void \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a7523c0cc9f0e3f7e648b3d228eb69ec7}{set\-Parameter} (\hyperlink{namespace_neutrino_flux_reweight_aa1e1a244ea4addfb793b4e316e6c0a72}{Parameter} p)
\begin{DoxyCompactList}\small\item\em add a parameter to the table or, if already there, reset its value \end{DoxyCompactList}\item 
\hyperlink{namespace_neutrino_flux_reweight_aa1e1a244ea4addfb793b4e316e6c0a72}{Parameter} \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_ae8f523d62145ab49b3a84e689190332b}{get\-Parameter} (const std\-::string \&name) const 
\begin{DoxyCompactList}\small\item\em get a parameter by name. throw an exception of a well defined type if we don't have it \end{DoxyCompactList}\item 
double \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_acb7dc8335b65b116f6092f2fa57ca5ed}{get\-Parameter\-Value} (const std\-::string \&name) const 
\begin{DoxyCompactList}\small\item\em get the value of a parameter. throw an exception of a well defined type if we don't have it \end{DoxyCompactList}\item 
bool \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a525c3a34a2468513b68e36c230a5e9fa}{has\-Parameter} (const std\-::string \&name) const 
\begin{DoxyCompactList}\small\item\em is the named parameter in the table? \end{DoxyCompactList}\item 
const \\*
boost\-::interprocess\-::flat\-\_\-map\\*
$<$ std\-::string, double $>$ \& \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a5438f5f53449e8dc1a12dfff2b9d922f}{get\-Map} () const 
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a9f4b1dfd17971c027c20c54d9f0229f8}{mapify} () const 
\begin{DoxyCompactList}\small\item\em Move the parameters from the vector to the map. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
boost\-::interprocess\-::flat\-\_\-map\\*
$<$ std\-::string, double $>$ \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a8568f2707a7541bc949d79d5961f429a}{table}
\item 
std\-::vector$<$ std\-::pair\\*
$<$ std\-::string, double $>$ $>$ \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_aea2a9552c84dae00ecdd95b6aa0a6f6c}{m\-\_\-vector}
\item 
bool \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_aaaeca6d7d1d1db64e3078effdca83a9c}{m\-\_\-vector\-Mode}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A list/table of parameter names and values. 

The memory overhead of std\-::map turns out to be large for our case, so we use a boost\-::flat\-\_\-map instead. This uses an ordered vector, so memory overhead is small. Insertion is slow, though, so we start out by putting all our parameters in a vector. At the first request for parameter or the entire map, we sort the vector, copy it into the map and free the vector. This is efficient when there is a \char`\"{}filling\char`\"{} phase when no reads are done, and a \char`\"{}reading\char`\"{} phase, when no more fills are done. 

Definition at line 30 of file Parameter\-Table.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_neutrino_flux_reweight_1_1_parameter_table_ae86246f4fd43bf1c7b6f4b62ed6264e8}{\index{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}!Parameter\-Table@{Parameter\-Table}}
\index{Parameter\-Table@{Parameter\-Table}!NeutrinoFluxReweight::ParameterTable@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}}
\subsubsection[{Parameter\-Table}]{\setlength{\rightskip}{0pt plus 5cm}Neutrino\-Flux\-Reweight\-::\-Parameter\-Table\-::\-Parameter\-Table (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_neutrino_flux_reweight_1_1_parameter_table_ae86246f4fd43bf1c7b6f4b62ed6264e8}


Definition at line 32 of file Parameter\-Table.\-h.


\begin{DoxyCode}
33       : \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_aaaeca6d7d1d1db64e3078effdca83a9c}{m\_vectorMode}(\textcolor{keyword}{true})
34       \{\}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{class_neutrino_flux_reweight_1_1_parameter_table_a5438f5f53449e8dc1a12dfff2b9d922f}{\index{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}!get\-Map@{get\-Map}}
\index{get\-Map@{get\-Map}!NeutrinoFluxReweight::ParameterTable@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}}
\subsubsection[{get\-Map}]{\setlength{\rightskip}{0pt plus 5cm}const boost\-::interprocess\-::flat\-\_\-map$<$std\-::string, double$>$\& Neutrino\-Flux\-Reweight\-::\-Parameter\-Table\-::get\-Map (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_neutrino_flux_reweight_1_1_parameter_table_a5438f5f53449e8dc1a12dfff2b9d922f}


Definition at line 45 of file Parameter\-Table.\-h.


\begin{DoxyCode}
45 \{ \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a9f4b1dfd17971c027c20c54d9f0229f8}{mapify}(); \textcolor{keywordflow}{return} \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a8568f2707a7541bc949d79d5961f429a}{table}; \}
\end{DoxyCode}
\hypertarget{class_neutrino_flux_reweight_1_1_parameter_table_ae8f523d62145ab49b3a84e689190332b}{\index{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}!get\-Parameter@{get\-Parameter}}
\index{get\-Parameter@{get\-Parameter}!NeutrinoFluxReweight::ParameterTable@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}}
\subsubsection[{get\-Parameter}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Parameter} Neutrino\-Flux\-Reweight\-::\-Parameter\-Table\-::get\-Parameter (
\begin{DoxyParamCaption}
\item[{const std\-::string \&}]{name}
\end{DoxyParamCaption}
) const}}\label{class_neutrino_flux_reweight_1_1_parameter_table_ae8f523d62145ab49b3a84e689190332b}


get a parameter by name. throw an exception of a well defined type if we don't have it 



Definition at line 17 of file Parameter\-Table.\-cpp.


\begin{DoxyCode}
17                                                                     \{
18     \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a9f4b1dfd17971c027c20c54d9f0229f8}{mapify}();
19     \hyperlink{namespace_neutrino_flux_reweight_aa1e1a244ea4addfb793b4e316e6c0a72}{Parameter} pOut;
20     boost::interprocess::flat\_map<std::string, double>::const\_iterator it=\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a8568f2707a7541bc949d79d5961f429a}{table}.find(name);
21     
22     \textcolor{keywordflow}{if}(it!=\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a8568f2707a7541bc949d79d5961f429a}{table}.end())\{
23       pOut.first  = name;
24       pOut.second = it->second;
25     \}
26     \textcolor{keywordflow}{else}\{
27       \textcolor{keywordflow}{throw} \hyperlink{struct_no_parameter_found}{NoParameterFound}(name);
28     \}
29     \textcolor{keywordflow}{return} pOut;
30     
31   \}
\end{DoxyCode}
\hypertarget{class_neutrino_flux_reweight_1_1_parameter_table_acb7dc8335b65b116f6092f2fa57ca5ed}{\index{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}!get\-Parameter\-Value@{get\-Parameter\-Value}}
\index{get\-Parameter\-Value@{get\-Parameter\-Value}!NeutrinoFluxReweight::ParameterTable@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}}
\subsubsection[{get\-Parameter\-Value}]{\setlength{\rightskip}{0pt plus 5cm}double Neutrino\-Flux\-Reweight\-::\-Parameter\-Table\-::get\-Parameter\-Value (
\begin{DoxyParamCaption}
\item[{const std\-::string \&}]{name}
\end{DoxyParamCaption}
) const}}\label{class_neutrino_flux_reweight_1_1_parameter_table_acb7dc8335b65b116f6092f2fa57ca5ed}


get the value of a parameter. throw an exception of a well defined type if we don't have it 



Definition at line 33 of file Parameter\-Table.\-cpp.


\begin{DoxyCode}
33                                                                       \{
34     \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a9f4b1dfd17971c027c20c54d9f0229f8}{mapify}();
35 
36     \textcolor{keywordtype}{double} val;
37     boost::interprocess::flat\_map<std::string, double>::const\_iterator it=\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a8568f2707a7541bc949d79d5961f429a}{table}.find(name);
38     
39     \textcolor{keywordflow}{if}(it!=\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a8568f2707a7541bc949d79d5961f429a}{table}.end())\{
40       val = it->second;
41     \}
42     \textcolor{keywordflow}{else}\{
43       \textcolor{keywordflow}{throw} \hyperlink{struct_no_parameter_found}{NoParameterFound}(name);
44     \}
45     
46     \textcolor{keywordflow}{return} val;
47     
48   \}
\end{DoxyCode}
\hypertarget{class_neutrino_flux_reweight_1_1_parameter_table_a525c3a34a2468513b68e36c230a5e9fa}{\index{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}!has\-Parameter@{has\-Parameter}}
\index{has\-Parameter@{has\-Parameter}!NeutrinoFluxReweight::ParameterTable@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}}
\subsubsection[{has\-Parameter}]{\setlength{\rightskip}{0pt plus 5cm}bool Neutrino\-Flux\-Reweight\-::\-Parameter\-Table\-::has\-Parameter (
\begin{DoxyParamCaption}
\item[{const std\-::string \&}]{name}
\end{DoxyParamCaption}
) const}}\label{class_neutrino_flux_reweight_1_1_parameter_table_a525c3a34a2468513b68e36c230a5e9fa}


is the named parameter in the table? 



Definition at line 50 of file Parameter\-Table.\-cpp.


\begin{DoxyCode}
50                                                                \{
51     \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a9f4b1dfd17971c027c20c54d9f0229f8}{mapify}();
52     \textcolor{keywordflow}{return} \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a8568f2707a7541bc949d79d5961f429a}{table}.find(name)!=\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a8568f2707a7541bc949d79d5961f429a}{table}.end();
53   \}  
\end{DoxyCode}
\hypertarget{class_neutrino_flux_reweight_1_1_parameter_table_a9f4b1dfd17971c027c20c54d9f0229f8}{\index{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}!mapify@{mapify}}
\index{mapify@{mapify}!NeutrinoFluxReweight::ParameterTable@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}}
\subsubsection[{mapify}]{\setlength{\rightskip}{0pt plus 5cm}void Neutrino\-Flux\-Reweight\-::\-Parameter\-Table\-::mapify (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}}}\label{class_neutrino_flux_reweight_1_1_parameter_table_a9f4b1dfd17971c027c20c54d9f0229f8}


Move the parameters from the vector to the map. 



Definition at line 55 of file Parameter\-Table.\-cpp.


\begin{DoxyCode}
56   \{
57     \textcolor{comment}{// If we're already out of vector mode, there's nothing to do}
58     \textcolor{keywordflow}{if}(!\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_aaaeca6d7d1d1db64e3078effdca83a9c}{m\_vectorMode}) \textcolor{keywordflow}{return};
59 
60     \textcolor{comment}{// Sort the vector, populate the flat\_map from it, and then clear}
61     \textcolor{comment}{// the vector}
62     std::sort(\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_aea2a9552c84dae00ecdd95b6aa0a6f6c}{m\_vector}.begin(), \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_aea2a9552c84dae00ecdd95b6aa0a6f6c}{m\_vector}.end());
63     \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a8568f2707a7541bc949d79d5961f429a}{table}=boost::interprocess::flat\_map<std::string, double>(\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_aea2a9552c84dae00ecdd95b6aa0a6f6c}{m\_vector}.begin(), 
      \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_aea2a9552c84dae00ecdd95b6aa0a6f6c}{m\_vector}.end());
64     \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_aea2a9552c84dae00ecdd95b6aa0a6f6c}{m\_vector}.clear();
65     \textcolor{comment}{// Magic to force the memory to be released: clear() doesn't do that}
66     std::vector<std::pair<std::string, double> >().swap(\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_aea2a9552c84dae00ecdd95b6aa0a6f6c}{m\_vector});
67     \textcolor{comment}{// We're no longer in vector mode, so we won't run this function}
68     \textcolor{comment}{// again}
69     \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_aaaeca6d7d1d1db64e3078effdca83a9c}{m\_vectorMode}=\textcolor{keyword}{false};
70   \}
\end{DoxyCode}
\hypertarget{class_neutrino_flux_reweight_1_1_parameter_table_a7523c0cc9f0e3f7e648b3d228eb69ec7}{\index{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}!set\-Parameter@{set\-Parameter}}
\index{set\-Parameter@{set\-Parameter}!NeutrinoFluxReweight::ParameterTable@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}}
\subsubsection[{set\-Parameter}]{\setlength{\rightskip}{0pt plus 5cm}void Neutrino\-Flux\-Reweight\-::\-Parameter\-Table\-::set\-Parameter (
\begin{DoxyParamCaption}
\item[{{\bf Parameter}}]{p}
\end{DoxyParamCaption}
)}}\label{class_neutrino_flux_reweight_1_1_parameter_table_a7523c0cc9f0e3f7e648b3d228eb69ec7}


add a parameter to the table or, if already there, reset its value 



Definition at line 8 of file Parameter\-Table.\-cpp.


\begin{DoxyCode}
8                                               \{
9     \textcolor{keywordflow}{if}(\hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_aaaeca6d7d1d1db64e3078effdca83a9c}{m\_vectorMode})\{
10       \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_aea2a9552c84dae00ecdd95b6aa0a6f6c}{m\_vector}.push\_back(p);
11     \}
12     \textcolor{keywordflow}{else}\{
13       \hyperlink{class_neutrino_flux_reweight_1_1_parameter_table_a8568f2707a7541bc949d79d5961f429a}{table}[p.first] = p.second;
14     \}
15   \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{class_neutrino_flux_reweight_1_1_parameter_table_aea2a9552c84dae00ecdd95b6aa0a6f6c}{\index{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}!m\-\_\-vector@{m\-\_\-vector}}
\index{m\-\_\-vector@{m\-\_\-vector}!NeutrinoFluxReweight::ParameterTable@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}}
\subsubsection[{m\-\_\-vector}]{\setlength{\rightskip}{0pt plus 5cm}std\-::vector$<$std\-::pair$<$std\-::string, double$>$ $>$ Neutrino\-Flux\-Reweight\-::\-Parameter\-Table\-::m\-\_\-vector\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [protected]}}}\label{class_neutrino_flux_reweight_1_1_parameter_table_aea2a9552c84dae00ecdd95b6aa0a6f6c}


Definition at line 51 of file Parameter\-Table.\-h.

\hypertarget{class_neutrino_flux_reweight_1_1_parameter_table_aaaeca6d7d1d1db64e3078effdca83a9c}{\index{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}!m\-\_\-vector\-Mode@{m\-\_\-vector\-Mode}}
\index{m\-\_\-vector\-Mode@{m\-\_\-vector\-Mode}!NeutrinoFluxReweight::ParameterTable@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}}
\subsubsection[{m\-\_\-vector\-Mode}]{\setlength{\rightskip}{0pt plus 5cm}bool Neutrino\-Flux\-Reweight\-::\-Parameter\-Table\-::m\-\_\-vector\-Mode\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [protected]}}}\label{class_neutrino_flux_reweight_1_1_parameter_table_aaaeca6d7d1d1db64e3078effdca83a9c}


Definition at line 52 of file Parameter\-Table.\-h.

\hypertarget{class_neutrino_flux_reweight_1_1_parameter_table_a8568f2707a7541bc949d79d5961f429a}{\index{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}!table@{table}}
\index{table@{table}!NeutrinoFluxReweight::ParameterTable@{Neutrino\-Flux\-Reweight\-::\-Parameter\-Table}}
\subsubsection[{table}]{\setlength{\rightskip}{0pt plus 5cm}boost\-::interprocess\-::flat\-\_\-map$<$std\-::string, double$>$ Neutrino\-Flux\-Reweight\-::\-Parameter\-Table\-::table\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [protected]}}}\label{class_neutrino_flux_reweight_1_1_parameter_table_a8568f2707a7541bc949d79d5961f429a}


Definition at line 50 of file Parameter\-Table.\-h.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
include/\hyperlink{_parameter_table_8h}{Parameter\-Table.\-h}\item 
src/\hyperlink{_parameter_table_8cpp}{Parameter\-Table.\-cpp}\end{DoxyCompactItemize}
